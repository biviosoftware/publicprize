{% extends 'contest/contest.html' %}
{% import "layout/macros.html" as macros %}

{% block title %}
{{ contestant.display_name }}
{{ super() }}
{% endblock %}

{%- macro amount_button(field) -%}
  <button name="{{ form[field].name }}" value="1" type="submit" class="btn btn-primary ladda-button pp-amount-bar" data-size="xs" data-style="expand-left"><span class="ladda-label">{{ form[field].label.text }}</span></button>
{%- endmacro -%}

{%- macro amount_bar() -%}
  <div>
    <form class="form-inline" method="POST" action="{{ contestant.format_uri('contestant') }}">
      {{ form.csrf_token() }}
      {{ amount_button('donate10') }}
      {{ amount_button('donate25') }}
      {{ amount_button('donate100') }}
      <div class="form-group {{ macros.error_class(form, 'amount') }}">
       	<div class="input-group pp-amount-bar">
    	  <span class="input-group-addon"><strong>$</strong></span>
	    {{ form['amount'](class="form-control", size="6") }}
      	</div>
      	<button type="submit" class="btn btn-primary pp-amount-bar">Back This Contestant</button>
      </div>
    </form>
  </div>
{%- endmacro -%}

{% block contest_content %}
<div class="pp-main">
<div class="pp-contestant">
    {{ amount_bar() }}
    <div class="pp-title">{{ contestant.display_name }}</div>
    <div class="pp-pitch">
    	<div class="embed-responsive embed-responsive-16by9">
    	    <iframe class="embed-responsive-item"
	    src="//www.youtube.com/embed/{{ contestant.youtube_code -}}
		 {%- if request.args.get('autoplay'): -%}
		 ?autoplay=1
		 {%- endif %}" allowfullscreen></iframe>
    	</div>
    </div>
    <div class="pp-abstract">
    	<h3 class="pp-heading">Summary</h3>
    	<p class="pp-contestant-desc">
   	    {{ contestant.contestant_desc }}
    	</p>
    </div>
    <div class="pp-slides">
    	<div class="embed-responsive embed-responsive-4by3">
    	    <iframe class="embed-responsive-item"
	    	src="//www.slideshare.net/slideshow/embed_code/{{ contestant.slideshow_code }}"
	    	allowfullscreen></iframe>
    	</div>
    </div>
    <div class="pp-founders">
    	<h3 class="pp-heading">Founders</h3>

    	{% for founder in founders %}

    	    <div class="pp-item">

	      {% if founder.founder_avatar: %}
    	    	<img class="pp-thumb" src="{{ founder.format_uri('founder-avatar') }}" alt="{{ founder.display_name }}"/>
	      {% endif %}
    	    	<span class="pp-name">{{ founder.display_name }}</span>
    	    	<span class="pp-desc">{{ founder.founder_desc }}</span>
    	    </div>

    	{% endfor %}

    </div>
    {{ amount_bar() }}
</div>
</div>
{% endblock %}
